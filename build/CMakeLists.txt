CMAKE_MINIMUM_REQUIRED (VERSION 2.8)
SET (CMAKE_VERBOSE_MAKEFILE of) 
SET (DEVICE msp430f5529) 
#SET (DRIVERLIB "/home/iwasz/Documents/workspace-CDT/MSP430ware_1_90_00_30/driverlib/driverlib/MSP430F5xx_6xx")

PROJECT (msp430-cpu-gauge)
include (msp430.cmake)

INCLUDE_DIRECTORIES("../src/")
AUX_SOURCE_DIRECTORY ("../src/" APP_SOURCES)


INCLUDE_DIRECTORIES("${DRIVERLIB}")
INCLUDE_DIRECTORIES("${DRIVERLIB}/inc")
INCLUDE_DIRECTORIES("${DRIVERLIB}/deprecated")
LIST (APPEND APP_SOURCES "${DRIVERLIB}/gpio.c")

ADD_EXECUTABLE(${CMAKE_PROJECT_NAME}.elf ${APP_SOURCES})

FIND_PROGRAM (OPENOCD_EXECUTABLE mspdebug)
ADD_CUSTOM_TARGET("upload" DEPENDS ${CMAKE_PROJECT_NAME}.elf COMMAND ${OPENOCD_EXECUTABLE} tilib 'prog ${CMAKE_PROJECT_NAME}.elf')

