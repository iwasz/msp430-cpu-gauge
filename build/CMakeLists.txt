CMAKE_MINIMUM_REQUIRED (VERSION 2.8)
SET (CMAKE_VERBOSE_MAKEFILE off) 
SET (DEVICE msp430f5529) 

PROJECT (msp430-cpu-gauge)
include (msp430.cmake)

AUX_SOURCE_DIRECTORY ("../src/" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("../src/usbApp" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("../src/usbConfig" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("../src/usbVendorClass" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("${DRIVERLIB}" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("${DRIVERLIB}/deprecated" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("${USBLIB}/USB_API/USB_Common" APP_SOURCES)
AUX_SOURCE_DIRECTORY ("${USBLIB}/USB_API/USB_CDC_API" APP_SOURCES)

INCLUDE_DIRECTORIES("../src/")
INCLUDE_DIRECTORIES("../src/usbConfig")
INCLUDE_DIRECTORIES("${DRIVERLIB}")
INCLUDE_DIRECTORIES("${DRIVERLIB}/inc")
INCLUDE_DIRECTORIES("${DRIVERLIB}/deprecated")
INCLUDE_DIRECTORIES("${USBLIB}") 


#LIST (APPEND APP_SOURCES "${DRIVERLIB}/gpio.c")
#LIST (APPEND APP_SOURCES "${DRIVERLIB}/wdt_a.c")
#LIST (APPEND APP_SOURCES "${DRIVERLIB}/timer_a.c")
#LIST (APPEND APP_SOURCES "${DRIVERLIB}/ucs.c")

ADD_EXECUTABLE(${CMAKE_PROJECT_NAME}.elf ${APP_SOURCES})

FIND_PROGRAM (MSPDEBUG_EXECUTABLE mspdebug)
ADD_CUSTOM_TARGET("upload" DEPENDS ${CMAKE_PROJECT_NAME}.elf COMMAND ${MSPDEBUG_EXECUTABLE} tilib 'prog ${CMAKE_PROJECT_NAME}.elf')

